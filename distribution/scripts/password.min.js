const button=document.querySelector(".main__button"),updateArrow=document.querySelector(".update-arrow"),switchBlocks=document.getElementById("switch-blocks"),switchList=document.getElementById("switch-list");let prevInputLength,prevInputQty,prevInputUppercase,prevInputLowercase,prevInputNumbers,prevInputSeparators,prevInputSpecialSymbols,globalResult=[];const mainTime=document.querySelector(".main__time"),errorNote=document.querySelector(".error-note"),note=document.querySelector(".note"),mainContainer=document.getElementById("main-container"),mainSubtitle=document.querySelector(".main__subtitle"),switchListGen=e=>{mainContainer.innerHTML="",note.innerHTML="";const t=document.createElement("textarea");t.classList.add("main__textarea"),t.classList.add("created__textarea"),t.setAttribute("rows","10"),t.textContent=e.join(", ").replace(/,/g,", "),mainContainer.appendChild(t);const n=document.createElement("button");n.classList.add("main__button"),n.classList.add("copy"),n.textContent="Copy",mainContainer.appendChild(n),n.addEventListener("click",()=>{const e=document.createElement("textarea");e.value=globalResult.join(", ").replace(/,/g,", "),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)})},updateExamplePassword=()=>{const e=parseInt(document.querySelector(".qty").value),t=parseInt(document.querySelector(".length").value),n=document.getElementById("uppercase-pass").checked,o=document.getElementById("lowercase-pass").checked,c=document.getElementById("numbers").checked,a=document.getElementById("separators").checked,s=document.getElementById("special-symbols").checked,r=document.querySelector(".error-note"),d=(n?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"")+(o?"abcdefghijklmnopqrstuvwxyz":"")+(c?"0123456789":"")+(a?"-_":"")+(s?"!#$%&()*+./:;=>?@[\\]^`{|}~'":"");if(e>=1&&e<=100&&t>=4&&t<=30&&(n||o||c||a||s)){r.innerHTML="";let e="";for(let n=0;n<t;n++){let t=Math.floor(Math.random()*d.length);e+=d.charAt(t)}document.querySelector(".example-password").textContent=e}},createSwitchBlocks=()=>{switchBlocks.classList.add("active"),switchList.classList.remove("active"),mainContainer.innerHTML="",note.innerHTML="Click on element to copy.";const e=globalResult[globalResult.length-1];e&&e.forEach(e=>{if("/^s*[\r\n]/gm"===e||"/^s*[\r\n]/gm"===e)return;const t=document.createElement("span");t.classList.add("numbers-span"),t.textContent=e,mainContainer.appendChild(t),t.addEventListener("click",()=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)})})},createSwitchLink=()=>{switchList.classList.add("active"),switchBlocks.classList.remove("active"),mainContainer.innerHTML="",note.innerHTML="";const e=document.createElement("textarea");e.classList.add("main__textarea"),e.classList.add("created__textarea"),e.setAttribute("rows","10"),e.textContent=globalResult.join(", ").replace(/,/g,", "),mainContainer.appendChild(e);const t=document.createElement("button");t.classList.add("main__button"),t.classList.add("copy"),t.textContent="Copy",mainContainer.appendChild(t),t.addEventListener("click",()=>{const e=document.createElement("textarea");e.value=globalResult.join(", ").replace(/,/g,", "),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)})};switchList.addEventListener("click",createSwitchLink),switchBlocks.addEventListener("click",createSwitchBlocks),document.querySelector(".length").addEventListener("input",updateExamplePassword),document.querySelectorAll('.options input[type="checkbox"]').forEach(e=>{e.addEventListener("change",updateExamplePassword)}),button.addEventListener("click",function(){globalResult=[],generatePassword()}),updateArrow.addEventListener("click",()=>{document.querySelector(".length").value=prevInputLength,document.querySelector(".qty").value=prevInputQty,document.getElementById("uppercase-pass").checked=prevInputUppercase,document.getElementById("lowercase-pass").checked=prevInputLowercase,document.getElementById("numbers").checked=prevInputNumbers,document.getElementById("separators").checked=prevInputSeparators,document.getElementById("special-symbols").checked=prevInputSpecialSymbols,generatePassword()});const displayPasswords=e=>{mainContainer.innerHTML="",e&&(switchList.classList.contains("active")?switchListGen(e):e.forEach(e=>{const t=document.createElement("span");t.classList.add("numbers-span"),t.textContent=e,mainContainer.appendChild(t),t.addEventListener("click",()=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t)})}))},generatePassword=()=>{const e=parseInt(document.querySelector(".qty").value),t=parseInt(document.querySelector(".length").value),n=document.getElementById("uppercase-pass").checked,o=document.getElementById("lowercase-pass").checked,c=document.getElementById("numbers").checked,a=document.getElementById("separators").checked,s=document.getElementById("special-symbols").checked,r=(n?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"")+(o?"abcdefghijklmnopqrstuvwxyz":"")+(c?"0123456789":"")+(a?"-_":"")+(s?"!#$%&()*+./:;=>?@[\\]^`{|}~'":""),d=document.body.scrollHeight;document.body.style.overflowY=d>750?"scroll":"hidden",prevInputLength=t,prevInputQty=e,prevInputUppercase=n,prevInputLowercase=o,prevInputNumbers=c,prevInputSeparators=a,prevInputSpecialSymbols=s,mainContainer.innerHTML="";const l=[];if(e>=1&&e<=100&&t>=4&&t<=30&&(n||o||c||a||s)){errorNote.innerHTML="",note.innerHTML="Click on element to copy.";for(let n=0;n<e;n++){let e="";for(let n=0;n<t;n++){let t=Math.floor(Math.random()*r.length);e+=r.charAt(t)}l.push(e)}mainSubtitle.classList.remove("hidden"),mainTime.innerHTML=formatTime(new Date),displayPasswords(l)}else note.innerHTML="",errorNote.innerHTML="<p class = 'red'>We were unable to generate passwords.</p>\n        The length of the characters should be from 4 to 30. The number of passwords is from 1 to 100. Select at least one group of characters that the password will consist of.";switchBlocks.classList.remove("hidden"),switchList.classList.remove("hidden"),globalResult.push(l)};generatePassword(),updateExamplePassword();